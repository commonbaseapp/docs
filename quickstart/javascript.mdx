---
title: "JavaScript"
description: "Start developing with Commonbase + JavaScript/TypeScript"
icon: "node-js"
---

> Last updated for npm package version `0.13.x`

The Commonbase npm package supports Node.js v18 and later. It also includes
TypeScript support.

<Warning>
  This package is meant for server-side usage only. Using it in the browser will
  expose your API Key and Project ID. With this information, anyone can make
  requests to Commonbase on your behalf.
</Warning>

## Installation

Install [Commonbase from npm](https://www.npmjs.com/package/@commonbase/sdk)
using your preferred package manager:

<CodeGroup>

```bash npm
npm add @commonbase/sdk
```

```bash pnpm
pnpm add @commonbase/sdk
```

```bash yarn
yarn add @commonbase/sdk
```

</CodeGroup>

## Usage

A Project ID and API Key are required for all Commonbase requests. You can find
your project ID and generate an API key in the
[Commonbase Dashboard](https://commonbase.com/).

To create a completion, configure a `Client` with your API Key and provide your
Project ID and prompt to `createCompletion`.

### Text Completion

To create a basic text completion, use `Client.createCompletion` with a
`prompt`:

```ts
import { Client } from "@commonbase/sdk";

const client = new Client({
  apiKey: "API_KEY",
});

const completion = await client.createCompletion({
  projectId: "PROJECT_ID",
  prompt: "Hello!",
});

console.log(completion.bestResult);
```

`completion.bestResult` returns the most relevant completion.
`completion.choices` contains the full list of choices returned by the LLM:

```ts
for (const choice of completion.choices) {
  console.log(choice.text);
}
```

### Chat Completion

To create a chat completion, provide a `chatContext` with a list of chat
messages and set the `providerConfig.params.type` to `'chat'`. In this mode, the
`prompt` is prepended to the context as a `'system'` message.

```ts
import { Client } from "@commonbase/sdk";

const client = new Client({
  apiKey: "API_KEY",
});

const completion = await client.createCompletion({
  projectId: "PROJECT_ID",
  prompt: "You are an assistant who helps users with tech problems.",
  chatContext: {
    messages: [
      { role: "user", content: "My internet isn't working." },
      { role: "assistant", content: "Have you tried restarting your router?" },
      { role: "user", content: "Yes I've tried that." },
    ],
  },
  providerConfig: {
    provider: "cb-openai-eu",
    params: {
      type: "chat",
    },
  },
});

console.log(completion.bestResult);
```

### Variables

You can also create a completion by providing variables and a template prompt.

```ts
import { Client } from "@commonbase/sdk";

const client = new Client({
  apiKey: "API_KEY",
});

const completion = await client.createCompletion({
  projectId: "PROJECT_ID",
  prompt: "A new user {{user_name}} just signed up with {{email}}. Say hello!"
  variables: {
    user_name: "Alice",
    email: "alice@example.com"
  }
});

console.log(completion.bestResult);
```

### Embeddings

An embedding is a vector (list) of floating point numbers. The distance between
two vectors measures their relatedness. Small distances suggest high relatedness
and large distances suggest low relatedness.

To learn more about embeddings, see:

- [OpenAI Embeddings](https://platform.openai.com/docs/guides/embeddings/what-are-embeddings)
- [Microsoft: What are Embeddings?](https://learn.microsoft.com/en-us/semantic-kernel/memories/embeddings)

Commonbase supports embeddings through OpenAI's `text-embedding-ada-002` model:

```ts
import { Client } from "@commonbase/sdk";

const client = new Client({
  apiKey: "API_KEY",
});

const embeddings = await client.createEmbedding({
  input: "Your text string",
  projectId: "PROJECT_ID",
  providerConfig: {
    provider: "cb-openai-eu",
    params: {
      type: "embeddings",
      model: "text-embedding-ada-002",
    },
  },
});

console.log(embeddings.data);
```

## Streaming

To stream the completion response as it is generated, use
`Client.streamCompletion`.

Streaming is useful when you want to display a completion "as it is typed" for a
chatbot-like experience.

For longer completions, streaming lets you avoid hanging while you wait for a
completed response from `Client.createCompletion`.

```ts
import { Client } from "@commonbase/sdk";

const client = new Client({
  apiKey: "API_KEY",
});

const completionStream = await client.streamCompletion({
  projectId: "PROJECT_ID",
  prompt: "Write me a short essay about artificial intelligence.",
});

for await (const completion of completionStream) {
  if (completion.completed) {
    process.stdout.write("\n\ndone");
  }
  process.stdout.write(completion.bestResult);
}
```
